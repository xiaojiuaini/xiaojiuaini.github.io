<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minecraft ActionBar Simulator</title>
<style>
  #inputArea {
    width: 100%;
    height: 100px;
    font-family: monospace;
  }
  #outputArea {
    width: 100%;
    white-space: pre-wrap;
    font-family: monospace;
    margin-top: 10px;
  }
  .transparent {
    visibility: hidden;
  }
</style>
</head>
<body>

<textarea id="inputArea" placeholder="Enter your ยง-prefixed Minecraft commands..."></textarea>
<div id="outputArea"></div>

<script>
const inputArea = document.getElementById('inputArea');
const outputArea = document.getElementById('outputArea');

// Map Minecraft color codes to CSS colors
const colorMap = {
  '0': 'black',
  '1': 'dark_gray',
  '2': 'dark_green',
  '3': 'dark_aqua',
  '4': 'dark_red',
  '5': 'dark_purple',
  '6': 'gold',
  '7': 'gray',
  '8': 'dark_blue',
  '9': 'light_purple',
  'a': 'cyan',
  'b': 'light_quartz',
  'c': 'light_red',
  'd': 'pink',
  'e': 'yellow',
  'f': 'white',
  'k': 'magic',
  'l': 'wave',
  'm': 'strikethrough',
  'n': 'underline',
  'o': 'italic',
  'r': 'reset'
};

inputArea.addEventListener('input', function() {
  const text = inputArea.value;
  let result = '';
  let inSpan = false;
  let spanColor = '';

  for (let i = 0; i < text.length; i++) {
    const char = text[i];
    if (char === 'ยง') {
      if (i + 1 < text.length) {
        const nextChar = text[i + 1];
        if (colorMap[nextChar]) {
          spanColor = colorMap[nextChar];
          result += '<span style="color: ' + spanColor + '">';
          inSpan = true;
          i++; // Skip the next character since it's part of the color code
        } else if (nextChar === '1') {
          // Transparent character
          result += '<span class="transparent">';
          inSpan = true;
          i++; // Skip the next character since it's part of the transparent code
        }
      }
    } else if (inSpan) {
      result += char;
    } else {
      result += char;
    }

    if (char === 'ยง' && inSpan && (i + 1 >= text.length || !colorMap[text[i + 1]])) {
      result += '</span>';
      inSpan = false;
    } else if (inSpan && (char === '\n' || char === '\r')) {
      result += '</span>' + char + '<span style="color: ' + spanColor + '">';
    }
  }

  if (inSpan) {
    result += '</span>';
  }

  outputArea.innerHTML = result;
});
</script>

</body>
</html>
